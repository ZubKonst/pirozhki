def coordinates(sw, ne, n_lat, n_lng)
  start_lat = sw[:lat]
  end_lat = ne[:lat]
  period_lat = (end_lat - start_lat)/n_lat

  start_lng = sw[:lng]
  end_lng = ne[:lng]
  period_lng = (end_lng - start_lng)/n_lng

  out = []
  n_lat.times.each do |i_lat|
    n_lng.times.each do |i_lng|
      current_lat = start_lat + i_lat * period_lat
      current_lng = start_lng + i_lng * period_lng
      out << { lat: current_lat, lng: current_lng }
    end
  end

  (n_lat-1).times.each do |i_lat|
    (n_lng-1).times.each do |i_lng|
      current_lat = start_lat + i_lat * period_lat + period_lat/2
      current_lng = start_lng + i_lng * period_lng + period_lng/2
      out << { lat: current_lat, lng: current_lng }
    end
  end

  out
end


# Moscow:
sw = {
  lat: 55.489927,
  lng: 37.3193288
}
ne = {
  lat: 56.009657,
  lng: 37.9456611
}


a = Geokit::LatLng.new(sw[:lat],sw[:lng])
b = Geokit::LatLng.new(ne[:lat],ne[:lng])
a.distance_to(b) # 70km

a = Geokit::LatLng.new(sw[:lat],sw[:lng])
b = Geokit::LatLng.new(sw[:lat],ne[:lng])
a.distance_to(b) # 40km

a = Geokit::LatLng.new(sw[:lat],sw[:lng])
b = Geokit::LatLng.new(ne[:lat],sw[:lng])
a.distance_to(b) # 60km


coordinates(sw, ne, 7, 5)

[
  {lat: 55.489927,          lng: 37.3193288}, {lat: 55.489927, lng: 37.44459526}, {lat: 55.489927, lng: 37.56986172}, {lat: 55.489927, lng: 37.695128180000005}, {lat: 55.489927, lng: 37.82039464},
  {lat: 55.56417414285714,  lng: 37.3193288}, {lat: 55.56417414285714, lng: 37.44459526}, {lat: 55.56417414285714, lng: 37.56986172}, {lat: 55.56417414285714, lng: 37.695128180000005}, {lat: 55.56417414285714, lng: 37.82039464},
  {lat: 55.63842128571429,  lng: 37.3193288}, {lat: 55.63842128571429, lng: 37.44459526}, {lat: 55.63842128571429, lng: 37.56986172}, {lat: 55.63842128571429, lng: 37.695128180000005}, {lat: 55.63842128571429, lng: 37.82039464},
  {lat: 55.712668428571426, lng: 37.3193288}, {lat: 55.712668428571426, lng: 37.44459526}, {lat: 55.712668428571426, lng: 37.56986172}, {lat: 55.712668428571426, lng: 37.695128180000005}, {lat: 55.712668428571426, lng: 37.82039464},
  {lat: 55.78691557142857,  lng: 37.3193288}, {lat: 55.78691557142857, lng: 37.44459526}, {lat: 55.78691557142857, lng: 37.56986172}, {lat: 55.78691557142857, lng: 37.695128180000005}, {lat: 55.78691557142857, lng: 37.82039464},
  {lat: 55.86116271428571,  lng: 37.3193288}, {lat: 55.86116271428571, lng: 37.44459526}, {lat: 55.86116271428571, lng: 37.56986172}, {lat: 55.86116271428571, lng: 37.695128180000005}, {lat: 55.86116271428571, lng: 37.82039464},
  {lat: 55.93540985714286,  lng: 37.3193288}, {lat: 55.93540985714286, lng: 37.44459526}, {lat: 55.93540985714286, lng: 37.56986172}, {lat: 55.93540985714286, lng: 37.695128180000005}, {lat: 55.93540985714286, lng: 37.82039464},
  {lat: 55.527050571428575, lng: 37.381962030000004}, {lat: 55.527050571428575, lng: 37.50722849}, {lat: 55.527050571428575, lng: 37.63249495}, {lat: 55.527050571428575, lng: 37.75776141000001},
  {lat: 55.601297714285714, lng: 37.381962030000004}, {lat: 55.601297714285714, lng: 37.50722849}, {lat: 55.601297714285714, lng: 37.63249495}, {lat: 55.601297714285714, lng: 37.75776141000001},
  {lat: 55.67554485714286,  lng: 37.381962030000004}, {lat: 55.67554485714286, lng: 37.50722849}, {lat: 55.67554485714286, lng: 37.63249495}, {lat: 55.67554485714286, lng: 37.75776141000001},
  {lat: 55.749792,          lng: 37.381962030000004}, {lat: 55.749792, lng: 37.50722849}, {lat: 55.749792, lng: 37.63249495}, {lat: 55.749792, lng: 37.75776141000001},
  {lat: 55.824039142857146, lng: 37.381962030000004}, {lat: 55.824039142857146, lng: 37.50722849}, {lat: 55.824039142857146, lng: 37.63249495}, {lat: 55.824039142857146, lng: 37.75776141000001},
  {lat: 55.898286285714285, lng: 37.381962030000004}, {lat: 55.898286285714285, lng: 37.50722849}, {lat: 55.898286285714285, lng: 37.63249495}, {lat: 55.898286285714285, lng: 37.75776141000001}
]
